<h1 align="center">Solana Token Verification Bot for Discord</h1>

<div align="center">

[![Status](https://img.shields.io/badge/status-active-success.svg)](https://github.com/gibwork/verify-bot)
[![GitHub Issues](https://img.shields.io/github/issues/gibwork/verify-bot.svg)](https://github.com/gibwork/verify-bot/issues)
[![GitHub Pull Requests](https://img.shields.io/github/issues-pr/gibwork/verify-bot.svg)](https://github.com/gibwork/verify-bot/pulls)

</div>

---

<p align="center">
  A system for verifying Solana token holdings to grant specific roles in a Discord server.
  <br>
  It consists of a Discord bot for user interaction and a Next.js web application for wallet connection and verification.
</p>

## ğŸ“ Table of Contents

- [ğŸ§ About](#about)
- [âœ¨ Live Demo](#live_demo)
- [ğŸ—ï¸ Project Structure](#project_structure)
- [ğŸ Getting Started](#getting_started)
  - [Prerequisites](#prerequisites)
  - [Installation](#installation)
  - [Environment Variables](#environment_variables)
  - [Database Setup](#database_setup)
  - [Running the Project](#running_the_project)
- [â›ï¸ Built Using](#built_using)
- [ğŸ¤ Contributing](#contributing)
- [âœï¸ Authors](#authors)
- [ğŸ‰ Acknowledgements](#acknowledgement)

## ğŸ§ About <a name="about"></a>

This project provides a robust way for Discord communities to gate access or grant special roles based on whether users hold a specific amount of a particular Solana SPL token.

The workflow is as follows:

1.  A user runs the `/verify` command in the Discord server.
2.  The Discord bot (`work-discord-bot`) presents the user with options to connect a new wallet or add more wallets.
3.  The bot generates a unique verification link pointing to the Next.js web application (`work-verify`).
4.  The user visits the link, connects their Solana wallet (using Solana Wallet Adapter).
5.  The web app prompts the user to sign a message containing a unique code to prove wallet ownership.
6.  Upon successful signing, the web app sends the wallet address, signature, message, and verification code to the bot's backend API.
7.  The bot's backend verifies the signature, checks the token balance for the specified SPL token using a Solana RPC endpoint, and determines if the user meets the requirement (potentially across multiple linked wallets).
8.  User data (Discord ID, username, wallet addresses, active status) is stored and updated in a Supabase database.
9.  If the balance requirement is met, the bot assigns the configured "Premium Role" to the user in Discord.
10. The bot periodically re-checks balances for all registered users and updates roles/database status accordingly.

## âœ¨ Live Demo <a name="live_demo"></a>

The web application is deployed at: [https://verify-bot-zeta.vercel.app/](https://verify-bot-zeta.vercel.app/)

> ![Note]
> You need a valid verification code generated by the Discord bot (`/verify` command) to fully use the verification page.
## ğŸ—ï¸ Project Structure <a name="project_structure"></a>

The repository contains two main applications:

```
.
â”œâ”€â”€ work-discord-bot/  # The Discord bot and its backend API
â”‚   â”œâ”€â”€ src/index.ts
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ work-verify/       # The Next.js frontend for wallet verification
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ api/rpc/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md
```

## ğŸ Getting Started <a name="getting_started"></a>

Follow these instructions to set up the project locally for development and testing.

### Prerequisites <a name="prerequisites"></a>

- **Node.js:** Version 18 or higher (check Discord.js and Next.js requirements).
- **pnpm:** The project uses pnpm for package management.
  ```sh
  npm install -g pnpm
